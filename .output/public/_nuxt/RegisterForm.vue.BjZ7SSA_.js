import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{o as u,c as _,a as l,f as h,d as g,t as b,r as v,b as i,i as n,m as O,q as B,y as S,s as N,w as R,C as $,H as A}from"./entry.D6qKh-EG.js";import{_ as H,a as T,b as j}from"./BeautyIcon.7kRgEAG5.js";import{M}from"./MainActionButton.Vl-4zAEb.js";import{u as y}from"./Drawer.coyZKisX.js";import{_ as P}from"./EmailInput.vue.DEscSOqp.js";import{b as U}from"./OtpForm.vue.BypntPqm.js";import{u as x}from"./useCustomFetch.C4rKAARt.js";const q={},z={class:"flex flex-col justify-center items-center"},F=l("div",{class:"font-medium text-[24px] leading-[37px] text-[#141414] text-center"}," عضویت ",-1),L=l("div",{class:"font-medium text-[13px] leading-[18px] text-[#133C3E] text-center mx-7"}," برای ثبت نام در بیوتی مپ ایمیل خود را وارد کنید ",-1),G=[F,L];function I(c,a){return u(),_("div",z,G)}const ce=D(q,[["render",I]]),J={class:"flex flex-col justify-center items-center"},K=l("div",{class:"font-medium text-[24px] leading-[37px] text-[#141414] text-center"}," کد تایید را وارد کنید ",-1),Q={class:"font-medium text-[13px] leading-[18px] text-[#133C3E] text-center mx-7 mt-[15px]"},W=h({__name:"Header",props:{email:{type:String,default:"",required:!0}},emits:["changeEmail"],setup(c,{emit:a}){const o=a,r=()=>{o("changeEmail")};return(e,m)=>(u(),_("div",J,[K,l("div",Q,[l("span",null,[g(" لطفا کد تاییدی را که به ایمیل "),l("span",null,b(c.email),1),g(" ارسال شده را وارد کنید. "),l("span",{class:"text-[#400842] font-medium underline cursor-pointer",onClick:r},"ویرایش ایمیل")])])]))}}),X={class:"flex flex-col justify-start items-center mt-[40px]"},Y=h({__name:"OtpDrawer",props:{isOpen:{type:Boolean,default:!1}},emits:["changeEmail","resend","validate","close"],setup(c,{emit:a}){const o=a;y();const r=v(""),e=()=>{o("close")},m=()=>{o("resend")},p=f=>{o("validate",f)};return(f,w)=>(u(),_("div",{class:S(["flex flex-col fixed md:hide top-0 bottom-0 px-[17px] overflow-y-scroll w-full duration-700 ease-in-out bg-white z-[99999999]",[c.isOpen?"left-0":"left-[-100%]"]])},[l("div",X,[i(W,{email:n(r),onChangeEmail:e},null,8,["email"]),c.isOpen?(u(),O(U,{key:0,onResend:m,onValidate:p})):B("",!0)])],2))}}),Z={class:"w-full overflow-y-auto"},ee=l("div",{class:"text-white text-center text-[20px] leading-[30px]"},"ارسال کد تایید",-1),me=h({__name:"RegisterForm",setup(c){const a=A();N();const o=y(),r=v(!1),e=v({email:"",password:"",accept_policy:!1}),m=()=>{r.value=!0},p=()=>{r.value=!1},f=()=>{m()},w=async()=>{const d={email:e.value.email,password:e.value.password},t=await x("/auth/register",{method:"POST",body:d});if(t.error.value!=null&&a.$toast.error("این ایمیل پیشتر ثبت نام کرده است",{rtl:!0}),t.data.value!=null){const s=$("email");s.value=e.value.email,a.$toast.success("کد ورود با موفقیت ارسال شد",{rtl:!0}),m()}},C=()=>{o.closeAllDrawers(),o.openLoginDrawer()},V=async d=>{const t={email:e.value.email,code:d},s=await x("/auth/register/otp",{method:"POST",body:t});s.error.value!=null&&a.$toast.error("کد تایید صحیح نیست",{rtl:!0}),s.data.value!=null&&(a.$toast.success("ایمیل شما تایید شد",{rtl:!0}),p(),o.closeAllDrawers())},k=async d=>{const t={email:e.value.email},s=await x("/auth/register",{method:"POST",body:t});if(s.error.value!=null&&a.$toast.error("این ایمیل پیشتر ثبت نام کرده است",{rtl:!0}),s.data.value!=null){const E=$("email");E.value=e.value.email,a.$toast.success("کد ورود با موفقیت ارسال شد",{rtl:!0}),m()}};return(d,t)=>(u(),_("div",Z,[i(P,{title:"ایمیل",modelValue:n(e).email,"onUpdate:modelValue":t[0]||(t[0]=s=>n(e).email=s)},null,8,["modelValue"]),i(H,{title:"کلمه عبور",modelValue:n(e).password,"onUpdate:modelValue":t[1]||(t[1]=s=>n(e).password=s),class:"mt-[27px]"},null,8,["modelValue"]),i(T,{class:"mt-[24px]",modelValue:n(e).accept_policy,"onUpdate:modelValue":t[2]||(t[2]=s=>n(e).accept_policy=s)},null,8,["modelValue"]),i(M,{class:"mt-[24px]",onClick:w},{default:R(()=>[ee]),_:1}),i(j,{class:"mt-[18px]",onClick:C,title:"ورود"}),i(Y,{"is-open":n(r),onClose:p,onChangeEmail:f,onValidate:V,onResend:k},null,8,["is-open"])]))}});export{ce as H,me as _,Y as a};
