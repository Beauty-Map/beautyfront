import{q as b,r as p,h as I,D as j,E as F,o as _,c as h,b as r,v as t,w as S,M as g,a as d,C as B,K as R,z as k,B as L,F as N}from"./entry.BtNxfFXi.js";import{u as O}from"./useCustomFetch.CTNm-nVq.js";import{_ as P}from"./MainActionButton.vue.C2o5PYNV.js";import{u as $}from"./Drawer.B7PGOG3I.js";import{_ as E,a as M}from"./OtpForm.vue.QtznO01i.js";import{_ as C,a as q,b as H,B as z}from"./BeautyIcon.CeeAJGlM.js";import{_ as K}from"./EmailInput.vue.CZF_wAUX.js";import G from"./Loading.BtJReGTm.js";import{L as J}from"./LoginImage.C4e5bYRA.js";import{H as Q,_ as W}from"./RegisterForm.vue.B5Xkcx9X.js";import{B as X}from"./BackIcon.C2wpftT-.js";import"./fetch.DJAD9rTR.js";import"./ErrorRedIcon.CwFyxL7s.js";import"./debounce.BMmXVQ06.js";import"./CheckBox.vue.CEWl44tu.js";const Y={class:"w-full overflow-y-auto"},Z=d("div",{class:"text-white text-center text-[20px] leading-[30px]"},"تایید",-1),ee=b({__name:"OtpForm",props:{modelValue:{type:String,default:""}},emits:["changePhoneNumber","resend","validate"],setup(v,{emit:f}){const u=f,a=v,o=g();$();const n=p({phone_number:a.modelValue,code:""}),i=p(!1),e=p(!1),x=()=>{if(!n.value.code){o.$toast.error("کد تایید را وارد کنید",{rtl:!0});return}u("validate",n.value.code)},y=async()=>{i.value=!i.value;const w={phone_number:n.value.phone_number},c=await O("/auth/register",{method:"POST",body:w});c.error.value!=null&&o.$toast.error("کد ورود با موفقیت ارسال شد",{rtl:!0}),c.data.value!=null&&o.$toast.success("کد ورود با موفقیت ارسال شد",{rtl:!0})};return I(()=>n.value.code,()=>e.value=!1),j(()=>F(()=>{n.value.phone_number=a.modelValue})),(w,c)=>(_(),h("div",Y,[r(E,{length:6,modelValue:t(n).code,"onUpdate:modelValue":c[0]||(c[0]=l=>t(n).code=l),"has-error":t(e),class:"mt-[20px] mb-[20px]"},null,8,["modelValue","has-error"]),r(M,{ref:"otpContainer",reset:t(i),onResend:y},null,8,["reset"]),r(P,{class:"mt-[24px]",onClick:x},{default:S(()=>[Z]),_:1})]))}}),te={class:"w-full overflow-y-auto"},oe=d("div",{class:"text-white text-center text-[20px] leading-[30px]"},"ثبت",-1),se=b({__name:"SetPasswordForm",props:{email:{type:String,default:""},rememberToken:{type:String,default:""}},setup(v){const f=v,u=g();B();const a=$(),o=p({password:"",password_confirmation:""}),n=async()=>{const i={email:f.email,remember_token:f.rememberToken,password:o.value.password,password_confirmation:o.value.password_confirmation},e=await O("/auth/password",{method:"POST",body:i});e.error.value!=null&&u.$toast.error("خطا رخ داده است",{rtl:!0}),e.data.value!=null&&(u.$toast.success("کد ورود با موفقیت ارسال شد",{rtl:!0}),a.closeAllDrawers(),a.openCompleteProfileDrawer())};return(i,e)=>(_(),h("div",te,[r(C,{title:"کلمه عبور",modelValue:t(o).password,"onUpdate:modelValue":e[0]||(e[0]=x=>t(o).password=x),class:"mt-[27px]"},null,8,["modelValue"]),r(C,{title:"تکرار کلمه عبور",modelValue:t(o).password_confirmation,"onUpdate:modelValue":e[1]||(e[1]=x=>t(o).password_confirmation=x),class:"mt-[27px]"},null,8,["modelValue"]),r(P,{class:"mt-[48px]",onClick:n},{default:S(()=>[oe]),_:1})]))}}),ae={class:"w-full overflow-y-auto"},le={key:0},re={key:1,class:"text-white text-center text-[20px] leading-[30px]"},ne=b({__name:"RegisterMiniForm",props:{modelValue:{type:String,default:""}},emits:["sent","update:modelValue"],setup(v,{emit:f}){const u=f,a=g();B();const o=$(),n=v,i=p(!1),e=p({email:"",password:"",accept_policy:!1}),x=()=>{let l=!0;return e.value.email||(a.$toast.error("لطفا ایمیل خود را وارد کنید",{rtl:!0}),l=!1),e.value.password||(a.$toast.error("لطفا پسورد خود را وارد کنید",{rtl:!0}),l=!1),e.value.accept_policy||(a.$toast.error("لطفا تیک گزینه تایید قوانین را بزنید",{rtl:!0}),l=!1),l},y=async()=>{var T;if(i.value||!x())return;i.value=!0;const l=R("referralId",{maxAge:60*60*24*30,path:"/",sameSite:"lax"}),s={email:e.value.email,password:e.value.password,referrer_code:(T=l.value)==null?void 0:T.toString()},{$postRequest:m}=a;m("/auth/register",s).then(async U=>{a.$toast.success("کد ورود با موفقیت ارسال شد",{rtl:!0});const V=R("email");V.value=e.value.email,a.$toast.success("کد ورود با موفقیت ارسال شد",{rtl:!0}),u("sent")}).catch(U=>{const V=Object.values(U.data.errors);for(const D in V)for(const A in V[D])a.$toast.error(V[D][A],{rtl:!0})}).finally(()=>{setTimeout(()=>i.value=!1,500)})},w=()=>{o.closeAllDrawers(),o.openLoginDrawer()},c=l=>{var s;u("update:modelValue",(s=l.target)==null?void 0:s.value)};return j(()=>F(()=>{e.value.email=n.modelValue})),(l,s)=>(_(),h("div",ae,[r(K,{onInput:c,title:"ایمیل",modelValue:t(e).email,"onUpdate:modelValue":s[0]||(s[0]=m=>t(e).email=m)},null,8,["modelValue"]),r(C,{title:"کلمه عبور",modelValue:t(e).password,"onUpdate:modelValue":s[1]||(s[1]=m=>t(e).password=m),class:"mt-[27px]"},null,8,["modelValue"]),r(q,{class:"mt-[24px]",modelValue:t(e).accept_policy,"onUpdate:modelValue":s[2]||(s[2]=m=>t(e).accept_policy=m)},null,8,["modelValue"]),r(P,{disabled:t(i),class:"mt-[24px]",onClick:y},{default:S(()=>[t(i)?(_(),h("div",le,[r(G)])):(_(),h("div",re,"ارسال کد تایید"))]),_:1},8,["disabled"]),r(H,{class:"mt-[18px]",onClick:w,title:"ورود"})]))}}),ie={class:"hidden md:flex flex-col relative justify-center items-center w-screen h-[calc(100vh-87px)] py-[35px] px-[40px] overflow-y-auto bg-white"},de={class:"hidden w-full md:flex flex-row max-w-[1200px] mx-auto min-h-[400px] bg-white rounded-[20px] shadow-[0px_2px_8px_0px_#00000040]"},ue={class:"overflow-y-auto w-full md:w-1/2 flex flex-col justify-center items-center md:rounded-tl-[20px] md:rounded-bl-[20px] rounded-[20px] h-full pb-[16px] md:px-[65px] px-[24px]"},ce=d("div",{class:"mt-[40px] text-[#344055] text-[32px] text-right font-bold"}," ثبت نام ",-1),me=d("div",{class:"mt-[25px] text-[#B6B8C3] font-normal text-[16px] text-right"}," برای دسترسی مستقیم به هنرمندان و تماس وارد شوید ",-1),pe=d("div",{class:"border border-[#2C3E5033] w-full my-[20px] border-dashed"},null,-1),fe={class:"overflow-y-auto hidden md:flex flex-col justify-center items-center py-[40px] px-[65px] w-1/2 bg-[#2dcfc1] rounded-tl-[20px] rounded-bl-[20px] h-full"},xe=d("div",{class:"mt-[24px] text-center w-full font-medium text-[24px] text-white"}," پشتیبانی فوری ",-1),_e=d("div",{class:"mt-[24px] text-center w-full font-light text-[18px] text-white"}," شما میتوانید به صورت 24 ساعته و 7 روز هفته را با ما تماس بگیرید ",-1),ve={class:"flex flex-col md:hidden px-[17px] overflow-y-scroll w-full duration-700 ease-in-out bg-white"},we={class:"flex flex-row items-center justify-end pl-[3px]"},he={class:"flex flex-col justify-start items-center"},je=b({__name:"index",setup(v){const f=g(),u=p(!1);B();const a=p(!1),o=p({email:"",accept_policy:!1}),n=p(""),i=$(),e=()=>{i.closeAllDrawers()},x=()=>{u.value=!0},y=()=>{u.value=!1},w=async c=>{var m;const l={email:o.value.email,code:c},s=await O("/auth/register/otp",{method:"POST",body:l});s.data.value&&(f.$toast.success("اطلاعات شما با موفقیت ثبت شد",{rtl:!0}),a.value=!0,n.value=(m=s.data.value)==null?void 0:m.token),s.error.value&&f.$toast.error("کد ورود صحیح نیست!",{rtl:!0})};return(c,l)=>(_(),h(N,null,[d("div",ie,[d("div",de,[d("div",ue,[ce,me,pe,!t(u)&&!t(a)?(_(),k(ne,{key:0,modelValue:t(o).email,"onUpdate:modelValue":l[0]||(l[0]=s=>t(o).email=s),onSent:x,class:"mt-[17px]"},null,8,["modelValue"])):t(a)?t(a)?(_(),k(se,{key:2,email:t(o).email,"remember-token":t(n)},null,8,["email","remember-token"])):L("",!0):(_(),k(ee,{key:1,modelValue:t(o).email,"onUpdate:modelValue":l[1]||(l[1]=s=>t(o).email=s),onResend:y,onValidate:w},null,8,["modelValue"]))]),d("div",fe,[r(J),xe,_e])])]),d("div",ve,[d("div",we,[r(X,{onClick:e})]),d("div",he,[r(z,{class:"mt-[8px]"}),r(Q),r(W,{class:"mt-[17px]"})])])],64))}});export{je as default};
