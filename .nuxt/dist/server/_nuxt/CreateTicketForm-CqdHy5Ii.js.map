{"version":3,"file":"CreateTicketForm-CqdHy5Ii.js","sources":["../../../../components/icons/TicketSubjectIcon.vue","../../../../components/modal/SubjectModal.vue","../../../../components/input/ChooseTicketSubjectInput.vue","../../../../components/icons/TicketTitleIcon.vue","../../../../components/input/TicketTitleInput.vue","../../../../components/input/TicketDescriptionInput.vue","../../../../components/icons/TicketFileIcon.vue","../../../../components/input/TicketChooseFile.vue","../../../../components/support/CreateTicketForm.vue"],"sourcesContent":["<template>\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M3 21V7H7V3H17V11H21V21H13V17H11V21H3ZM5 19H7V17H5V19ZM5 15H7V13H5V15ZM5 11H7V9H5V11ZM9 15H11V13H9V15ZM9 11H11V9H9V11ZM9 7H11V5H9V7ZM13 15H15V13H13V15ZM13 11H15V9H13V11ZM13 7H15V5H13V7ZM17 19H19V17H17V19ZM17 15H19V13H17V15Z\" fill=\"#133C3E\"/>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div class=\"bg-[rgba(0,0,0,.4)] duration-500 transition-all fixed top-0 right-0 bottom-0 left-0 flex flex-col justify-center items-center z-[9999]\" @click.stop=\"closeModal\"\r\n      :class=\"[open ? 'flex' : 'hidden']\"\r\n  >\r\n    <div class=\"bg-white mx-[20px] max-h-[70%] relative rounded-[12px] min-w-[200px] min-h-[150px] shadow-[rgba(17,_17,_26,_0.1)_0px_0px_16px]\">\r\n      <CloseIcon @click=\"closeModal\" class=\"absolute top-[14px] right-[14px]\"/>\r\n      <div class=\"bg-[#133C3E] text-white font-semibold text-[14px] leading-[21px] rounded-t-[12px] h-[60px] flex flex-row justify-center items-center\">\r\n        <span>انتخاب موصوع</span>\r\n      </div>\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nimport CloseIcon from \"~/components/icons/CloseIcon.vue\";\r\n\r\nconst emits = defineEmits(['close'])\r\nconst props = defineProps({\r\n  open: {\r\n    type: Boolean,\r\n    default: false,\r\n  }\r\n})\r\n\r\nconst closeModal = () => {\r\n  emits('close')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <div class=\"flex flex-col items-start justify-start w-full\">\r\n    <div @click=\"openChooseSubjectModal\" class=\"w-full text-[#133C3E] rounded-[12px] font-medium text-[15px] text-right leading-[23px] border border-[#A9A7A7] bg-[#F7F5C4] py-[20px] px-[20px] cursor-pointer flex flex-row justify-start items-center\">\r\n      <TicketSubjectIcon />\r\n      <div class=\"flex flex-row grow mr-[10px]\">\r\n        <span v-if=\"subject\">{{ subject.title }}</span>\r\n        <span v-else>انتخاب موضوع</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full flex flex-row justify-start items-center\" v-if=\"hasError\">\r\n      <ErrorRedIcon />\r\n      <span class=\"mr-1 text-[#F44336] text-[10px] leading-[12px]\">{{errorText}}</span>\r\n    </div>\r\n    <SubjectModal :open=\"showChooseSubject\" @close=\"closeChooseSubjectModal\">\r\n      <div class=\" w-full h-full min-h-[293px] justify-center items-start gap-x-[5px] gap-y-[5px] px-[28px] py-[28px] flex flex-row flex-wrap\">\r\n        <div @click.stop=\"chooseSubject(s)\" class=\"min-h-[45px] flex justify-center items-center border border-[#133C3E] text-[#133C3E] font-medium text-[12px] leading-[18px] text-center bg-[#F7F5C4] w-[125px] py-[8px] px-[16px] rounded-[10px]\" v-for=\"(s, i) in subjects\" :key=\"i\">\r\n          {{ s.title }}\r\n        </div>\r\n      </div>\r\n    </SubjectModal>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nimport TicketSubjectIcon from \"~/components/icons/TicketSubjectIcon.vue\";\r\nimport ErrorRedIcon from \"~/components/icons/ErrorRedIcon.vue\";\r\nimport {useCustomFetch} from \"~/composables/useCustomFetch\";\r\nimport SubjectModal from \"~/components/modal/SubjectModal.vue\";\r\n\r\nconst emits = defineEmits(['update:modelValue'])\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Object,\r\n    default: ''\r\n  }\r\n})\r\nconst subject = ref<ISubject|null>(props.modelValue as (ISubject | null))\r\nconst errorText = ref<String>('')\r\nconst hasError = ref<Boolean>(false)\r\nconst showChooseSubject = ref<Boolean>(false)\r\nconst subjects = ref<ISubject[]>([])\r\n\r\nconst getSubjects = async () => {\r\n  const res = await useCustomFetch('/subjects', {\r\n    method: \"get\",\r\n  })\r\n  if (res.data.value) {\r\n    subjects.value = res.data.value?.data as ISubject[]\r\n  }\r\n}\r\n\r\nconst openChooseSubjectModal = () => {\r\n  showChooseSubject.value = true\r\n}\r\n\r\nconst closeChooseSubjectModal = () => {\r\n  showChooseSubject.value = false\r\n}\r\n\r\nconst chooseSubject = (s: ISubject|null) => {\r\n  subject.value = s\r\n  emits('update:modelValue', s)\r\n  closeChooseSubjectModal()\r\n}\r\n\r\ngetSubjects()\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M8 11C8.28333 11 8.52083 10.9042 8.7125 10.7125C8.90417 10.5208 9 10.2833 9 10C9 9.71667 8.90417 9.47917 8.7125 9.2875C8.52083 9.09583 8.28333 9 8 9C7.71667 9 7.47917 9.09583 7.2875 9.2875C7.09583 9.47917 7 9.71667 7 10C7 10.2833 7.09583 10.5208 7.2875 10.7125C7.47917 10.9042 7.71667 11 8 11ZM12 11C12.2833 11 12.5208 10.9042 12.7125 10.7125C12.9042 10.5208 13 10.2833 13 10C13 9.71667 12.9042 9.47917 12.7125 9.2875C12.5208 9.09583 12.2833 9 12 9C11.7167 9 11.4792 9.09583 11.2875 9.2875C11.0958 9.47917 11 9.71667 11 10C11 10.2833 11.0958 10.5208 11.2875 10.7125C11.4792 10.9042 11.7167 11 12 11ZM16 11C16.2833 11 16.5208 10.9042 16.7125 10.7125C16.9042 10.5208 17 10.2833 17 10C17 9.71667 16.9042 9.47917 16.7125 9.2875C16.5208 9.09583 16.2833 9 16 9C15.7167 9 15.4792 9.09583 15.2875 9.2875C15.0958 9.47917 15 9.71667 15 10C15 10.2833 15.0958 10.5208 15.2875 10.7125C15.4792 10.9042 15.7167 11 16 11ZM2 22V4C2 3.45 2.19583 2.97917 2.5875 2.5875C2.97917 2.19583 3.45 2 4 2H20C20.55 2 21.0208 2.19583 21.4125 2.5875C21.8042 2.97917 22 3.45 22 4V16C22 16.55 21.8042 17.0208 21.4125 17.4125C21.0208 17.8042 20.55 18 20 18H6L2 22ZM5.15 16H20V4H4V17.125L5.15 16Z\" fill=\"#133C3E\"/>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div class=\"flex flex-col items-start justify-start w-full\">\r\n    <div class=\"w-full text-[#133C3E] rounded-[12px] font-medium text-[15px] text-right leading-[23px] border border-[#A9A7A7] bg-[#F7F5C4] py-[20px] px-[20px] cursor-pointer flex flex-row justify-start items-center\">\r\n      <TicketTitleIcon />\r\n      <div class=\"flex flex-row grow mr-[10px]\">\r\n        <input type=\"text\" class=\"text-right h-full bg-transparent w-full outline-none focus:outline-none placeholder:text-[#133C3E]\"\r\n               @input=\"updateTextDebounce\"\r\n               v-model=\"value\"\r\n               placeholder=\"عنوان\"\r\n        >\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full flex flex-row justify-start items-center\" v-if=\"hasError\">\r\n      <ErrorRedIcon />\r\n      <span class=\"mr-1 text-[#F44336] text-[10px] leading-[12px]\">{{errorText}}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nimport TicketTitleIcon from \"~/components/icons/TicketTitleIcon.vue\";\r\nimport ErrorRedIcon from \"~/components/icons/ErrorRedIcon.vue\";\r\n\r\nconst emits = defineEmits(['update:modelValue'])\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: String,\r\n    default: ''\r\n  }\r\n})\r\nconst value = ref<String>(props.modelValue)\r\nconst errorText = ref<String>('')\r\nconst hasError = ref<Boolean>(false)\r\n\r\nconst updateText = ($event: Event) => {\r\n  emits('update:modelValue', $event.target?.value)\r\n}\r\n\r\nconst updateTextDebounce = useDebounce(updateText, 500)\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <div class=\"flex flex-col items-start justify-start w-full\">\r\n    <div class=\"w-full text-[#133C3E] rounded-[12px] font-medium text-[15px] text-right leading-[23px] border border-[#A9A7A7] bg-[#F7F5C4] py-[20px] px-[20px] cursor-pointer flex flex-row justify-start items-start\">\r\n      <TicketTitleIcon />\r\n      <div class=\"flex flex-row grow mr-[10px]\">\r\n        <textarea type=\"text\" class=\"text-right h-full bg-transparent w-full outline-none focus:outline-none placeholder:text-[#133C3E]\"\r\n                  @input=\"updateTextDebounce\"\r\n                  v-model=\"value\"\r\n                  placeholder=\"توضیحات\"\r\n                  rows=\"5\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full flex flex-row justify-start items-center\" v-if=\"hasError\">\r\n      <ErrorRedIcon />\r\n      <span class=\"mr-1 text-[#F44336] text-[10px] leading-[12px]\">{{errorText}}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nimport TicketTitleIcon from \"~/components/icons/TicketTitleIcon.vue\";\r\nimport ErrorRedIcon from \"~/components/icons/ErrorRedIcon.vue\";\r\n\r\nconst emits = defineEmits(['update:modelValue'])\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: String,\r\n    default: ''\r\n  }\r\n})\r\nconst value = ref<String>(props.modelValue)\r\nconst errorText = ref<String>('')\r\nconst hasError = ref<Boolean>(false)\r\n\r\nconst updateText = ($event: Event) => {\r\n  emits('update:modelValue', $event.target?.value)\r\n}\r\n\r\nconst updateTextDebounce = useDebounce(updateText, 500)\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M6.5 20C4.98333 20 3.6875 19.475 2.6125 18.425C1.5375 17.375 1 16.0917 1 14.575C1 13.275 1.39167 12.1167 2.175 11.1C2.95833 10.0833 3.98333 9.43333 5.25 9.15C5.66667 7.61667 6.5 6.375 7.75 5.425C9 4.475 10.4167 4 12 4C13.95 4 15.6042 4.67917 16.9625 6.0375C18.3208 7.39583 19 9.05 19 11C20.15 11.1333 21.1042 11.6292 21.8625 12.4875C22.6208 13.3458 23 14.35 23 15.5C23 16.75 22.5625 17.8125 21.6875 18.6875C20.8125 19.5625 19.75 20 18.5 20H13C12.45 20 11.9792 19.8042 11.5875 19.4125C11.1958 19.0208 11 18.55 11 18V12.85L9.4 14.4L8 13L12 9L16 13L14.6 14.4L13 12.85V18H18.5C19.2 18 19.7917 17.7583 20.275 17.275C20.7583 16.7917 21 16.2 21 15.5C21 14.8 20.7583 14.2083 20.275 13.725C19.7917 13.2417 19.2 13 18.5 13H17V11C17 9.61667 16.5125 8.4375 15.5375 7.4625C14.5625 6.4875 13.3833 6 12 6C10.6167 6 9.4375 6.4875 8.4625 7.4625C7.4875 8.4375 7 9.61667 7 11H6.5C5.53333 11 4.70833 11.3417 4.025 12.025C3.34167 12.7083 3 13.5333 3 14.5C3 15.4667 3.34167 16.2917 4.025 16.975C4.70833 17.6583 5.53333 18 6.5 18H9V20H6.5Z\" fill=\"#0E391D\"/>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div class=\"cursor-pointer flex flex-col items-start justify-start max-w-[200px] mx-auto\">\r\n    <div @click=\"openChooseFile\" class=\"text-[#133C3E] rounded-[25px] font-medium text-[15px] text-center leading-[23px] border border-[#A9A7A7] bg-[#F7F5C4] py-[8px] px-[12px] cursor-pointer flex flex-row justify-start items-center\">\r\n      <TicketFileIcon />\r\n      <span>فایل پیوست (اختیاری)</span>\r\n    </div>\r\n    <div class=\"w-full flex flex-row justify-start items-center\" v-if=\"hasError\">\r\n      <ErrorRedIcon />\r\n      <span class=\"mr-1 text-[#F44336] text-[10px] leading-[12px]\">{{errorText}}</span>\r\n    </div>\r\n    <input accept=\"application/pdf,image/jpeg,image/png\" hidden type=\"file\" ref=\"file\" @change=\"onFileChoose\">\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nimport ErrorRedIcon from \"~/components/icons/ErrorRedIcon.vue\";\r\nimport TicketFileIcon from \"~/components/icons/TicketFileIcon.vue\";\r\n\r\nconst emits = defineEmits(['choose'])\r\nconst errorText = ref<String>('')\r\nconst hasError = ref<Boolean>(false)\r\nconst file = ref()\r\nconst base64File = ref<string | ArrayBuffer | null>(null);\r\n\r\nconst openChooseFile = () => {\r\n  file.value?.click()\r\n}\r\n\r\nconst onFileChoose = ($event: Event) => {\r\n  const file = $event.target?.files[0];\r\n  if (!file) {\r\n    emits('choose', '')\r\n    return\r\n  }\r\n  const reader = new FileReader();\r\n\r\n  reader.onload = () => {\r\n    base64File.value = reader.result;\r\n    emits('choose', base64File.value)\r\n  };\r\n\r\n  reader.readAsDataURL(file);\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <div class=\"w-full\">\r\n    <ChooseTicketSubjectInput class=\"mb-[20px]\" v-model=\"form.subject\"/>\r\n    <TicketTitleInput class=\"mb-[20px]\" v-model=\"form.title\"/>\r\n    <TicketDescriptionInput class=\"mb-[20px]\" v-model=\"form.description\"/>\r\n    <TicketChooseFile class=\"mb-[20px]\" @choose=\"chooseFile\"/>\r\n    <div @click=\"doSendTicket\" class=\"cursor-pointer flex flex-row items-center justify-center px-[10px] py-[10px] bg-[#FF3CA0] text-white text-[15px] leading-[22px] text-center font-medium rounded-[12px] h-[62px] w-full\">\r\n      <AddTicketIcon />\r\n      <span class=\"mr-[4px] whitespace-nowrap\">ثبت تیکت</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport ChooseTicketSubjectInput from \"~/components/input/ChooseTicketSubjectInput.vue\";\r\nimport TicketTitleInput from \"~/components/input/TicketTitleInput.vue\";\r\nimport TicketDescriptionInput from \"~/components/input/TicketDescriptionInput.vue\";\r\nimport AddTicketIcon from \"~/components/icons/AddTicketIcon.vue\";\r\nimport TicketChooseFile from \"~/components/input/TicketChooseFile.vue\";\r\nimport {useCustomFetch} from \"~/composables/useCustomFetch\";\r\n\r\nconst router = useRouter()\r\nconst app = useNuxtApp()\r\n\r\nconst form = ref<ITicketForm>({\r\n  subject: null,\r\n  title: '',\r\n  description: '',\r\n  new_file: '',\r\n})\r\n\r\nconst errors = ref({\r\n  subject: '',\r\n  title: '',\r\n  description: '',\r\n})\r\n\r\nconst doSendTicket = async () => {\r\n  if (!validateForm()) {\r\n    const res = await useCustomFetch('/own/tickets', {\r\n      method: \"POST\",\r\n      body: {\r\n        title: form.value.title,\r\n        subject_id: form.value.subject?.id,\r\n        description: form.value.description,\r\n        new_file: form.value.new_file,\r\n      },\r\n    })\r\n    if (res.error.value) {\r\n      app.$toast.error('متاسفانه خطایی رخ داده است. بعدا امتحان کنید', {rtl: true})\r\n    }\r\n    if (res.data.value) {\r\n      app.$toast.error('درخواست شما با موفقیت ثبت شد', {rtl: true})\r\n      router.back()\r\n    }\r\n  }\r\n}\r\n\r\nconst validateForm = () => {\r\n  let hasError = false\r\n  if (!form.value.subject) {\r\n    app.$toast.error('لطفا موضوع را وارد کنید', {rtl: true})\r\n    hasError = true\r\n  }\r\n  if (!form.value.title) {\r\n    app.$toast.error('لطفا عنوان را وارد کنید', {rtl: true})\r\n    hasError = true\r\n  }\r\n  if (!form.value.title) {\r\n    app.$toast.error('لطفا توضیحات را وارد کنید', {rtl: true})\r\n    hasError = true\r\n  }\r\n  return hasError\r\n}\r\n\r\nconst chooseFile = (file: string) => {\r\n  form.value.new_file = file\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"names":["_sfc_ssrRender","_ssrRenderAttrs","_mergeProps","useDebounce"],"mappings":";;;;;;;;;;;;AAAA,SAAAA,iBAAA,MAAA,OAAA,SAAA,QAAA;AACO,QAAA,OAAUC,eAAAC,WAAA;AAAA,IAAC;IAAY;IAAoB,SAAW;AAAA,IAAC;IAD9D,OAAA;AAAA;;;;;;;;;;;;;;;;;;;;ACkBA,UAAM,QAAQ;AAQd,UAAM,aAAa,MAAM;AACvB,YAAM,OAAO;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGf,UAAM,QAAQ;AACd,UAAM,QAAQ;AAMR,UAAA,UAAU,IAAmB,MAAM,UAA+B;AAClE,UAAA,YAAY,IAAY,EAAE;AAC1B,UAAA,WAAW,IAAa,KAAK;AAC7B,UAAA,oBAAoB,IAAa,KAAK;AACtC,UAAA,WAAW,IAAgB,CAAA,CAAE;AAEnC,UAAM,cAAc,YAAY;;AACxB,YAAA,MAAM,MAAM,eAAe,aAAa;AAAA,QAC5C,QAAQ;AAAA,MAAA,CACT;AACG,UAAA,IAAI,KAAK,OAAO;AACT,iBAAA,SAAQ,SAAI,KAAK,UAAT,mBAAgB;AAAA,MACnC;AAAA,IAAA;AAOF,UAAM,0BAA0B,MAAM;AACpC,wBAAkB,QAAQ;AAAA,IAAA;AAGtB,UAAA,gBAAgB,CAAC,MAAqB;AAC1C,cAAQ,QAAQ;AAChB,YAAM,qBAAqB,CAAC;AACJ;IAAA;AAGd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEZ,SAAAF,iBAAA,MAAA,OAAA,SAAA,QAAA;AACO,QAAA,OAAUC,eAAAC,WAAA;AAAA,IAAC;IAAY;IAAoB,SAAW;AAAA,IAAC;IAD9D,OAAA;AAAA;;;;;;;;;;;;;;;;;;;;ACwBA,UAAM,QAAQ;AACd,UAAM,QAAQ;AAMR,UAAA,QAAQ,IAAY,MAAM,UAAU;AACpC,UAAA,YAAY,IAAY,EAAE;AAC1B,UAAA,WAAW,IAAa,KAAK;AAE7B,UAAA,aAAa,CAAC,WAAkB;;AAC9B,YAAA,sBAAqB,YAAO,WAAP,mBAAe,KAAK;AAAA,IAAA;AAGtBC,aAAY,YAAY,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdtD,UAAM,QAAQ;AACd,UAAM,QAAQ;AAMR,UAAA,QAAQ,IAAY,MAAM,UAAU;AACpC,UAAA,YAAY,IAAY,EAAE;AAC1B,UAAA,WAAW,IAAa,KAAK;AAE7B,UAAA,aAAa,CAAC,WAAkB;;AAC9B,YAAA,sBAAqB,YAAO,WAAP,mBAAe,KAAK;AAAA,IAAA;AAGtBA,aAAY,YAAY,GAAG;;;;;;;;;;;;;;;;;;;;;;;ACxCtD,SAAA,eAAA,MAAA,OAAA,SAAA,QAAA;AACO,QAAA,OAAUF,eAAAC,WAAA;AAAA,IAAC;IAAY;IAAoB,SAAW;AAAA,IAAC;IAD9D,OAAA;AAAA;;;;;;;;;;;;;;ACoBM,UAAA,YAAY,IAAY,EAAE;AAC1B,UAAA,WAAW,IAAa,KAAK;AACtB,QAAI;AACE,QAAiC,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;ACFzC,cAAU;AAGzB,UAAM,OAAO,IAAiB;AAAA,MAC5B,SAAS;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,MACb,UAAU;AAAA,IAAA,CACX;AAEc,QAAI;AAAA,MACjB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,IAAA,CACd;AAwCK,UAAA,aAAa,CAAC,SAAiB;AACnC,WAAK,MAAM,WAAW;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}