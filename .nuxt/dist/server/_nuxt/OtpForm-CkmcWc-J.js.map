{"version":3,"file":"OtpForm-CkmcWc-J.js","sources":["../../../../components/input/OtpInput.vue","../../../../node_modules/nuxt/dist/app/compat/interval.js","../../../../components/otp-drawer/OtpResendButton.vue","../../../../components/otp-drawer/OtpForm.vue"],"sourcesContent":["<template>\r\n  <div ref=\"container\" class=\"flex flex-row gap-2 items-center justify-center py-4 ltr-dir w-full px-1\">\r\n    <input\r\n        type=\"text\"\r\n        class=\"text-center h-[46px] w-[40px] rounded-[8px] outline-none duration-300 border text-[#141414] placeholder:text-[#141414]\"\r\n        :class=\"[hasError ? 'border-[#FF3CA0] focus:border-[#FF3CA0] shadow-[0px_0px_5.5px_0px__#FF3CA0]' : 'border-[#A9A7A7] focus:border-[#133C3E]']\"\r\n        placeholder=\"_\"\r\n        v-for=\"n in length\"\r\n        :key=\"n\"\r\n        v-model=\"otpArray[n-1]\"\r\n        maxlength=\"1\"\r\n        @keyup=\"(e) => handleEnter(e, n-1)\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nconst emits = defineEmits(['update:modelValue'])\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  length: {\r\n    type: Number,\r\n    default: 4\r\n  },\r\n  hasError: {\r\n    type: Boolean,\r\n    default: false,\r\n    required: true\r\n  }\r\n})\r\nconst otpArray = ref<String[]>([])\r\n\r\nconst container = ref()\r\n\r\nconst handleEnter = (e: any, n: number) => {\r\n  const children = container.value.children\r\n  const pressedKey = e.key;\r\n  if (n > 0 && (pressedKey == 'Backspace' || pressedKey == 'Delete')) {\r\n    otpArray.value[n] = ''\r\n    setTimeout(() => {\r\n      children[n-1].focus()\r\n    }, 50)\r\n  } else {\r\n    const matched = pressedKey.match(/^[0-9]$/)\r\n    if (!matched) {\r\n      otpArray.value[n] = ''\r\n      return\r\n    } else {\r\n      if (n < props.length - 1) {\r\n        otpArray.value[n] = pressedKey\r\n        setTimeout(() => {\r\n          children[n+1].focus()\r\n        }, 50)\r\n      }\r\n    }\r\n  }\r\n  setTimeout(() => {\r\n    emits('update:modelValue', otpArray.value.join(''))\r\n  }, 100)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { createError } from \"../composables/error.js\";\nconst intervalError = \"[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `import.meta.client`.\";\nexport const setInterval = import.meta.client ? window.setInterval : () => {\n  if (import.meta.dev) {\n    throw createError({\n      statusCode: 500,\n      message: intervalError\n    });\n  }\n  console.error(intervalError);\n};\n","<template>\r\n  <div class=\"w-full\">\r\n    <div class=\"flex flex-col justify-start items-center font-medium text-center text-[13px] leading-[20px] text-[#133C3E]\" v-if=\"timerEnded\">\r\n      کد را دریافت نکردید!\r\n      <span class=\"text-[#400842] font-medium underline cursor-pointer\" @click=\"resendCode\">ارسال مجدد</span>\r\n    </div>\r\n    <div v-else class=\"flex flex-col justify-start items-center font-medium text-center text-[16px] leading-[20px] text-[#133C3E]\">\r\n      <span>{{ time }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nconst emits = defineEmits(['resend'])\r\nconst props = defineProps({\r\n  period: {\r\n    type: Number,\r\n    default: 60\r\n  },\r\n  reset: {\r\n    type: Boolean,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst time = ref<number>(props.period)\r\nconst timerEnded = ref<Boolean>(false)\r\ntimerEnded.value = false\r\n\r\nconst resendCode = () => {\r\n  emits('resend')\r\n}\r\n\r\nconst count = () => {\r\n  timerEnded.value = false;\r\n  const timeCounter = setInterval(() => {\r\n    if (time.value == 1) {\r\n      clearInterval(timeCounter);\r\n      timerEnded.value = true;\r\n      time.value = 60\r\n    } else {\r\n      time.value = time.value - 1\r\n    }\r\n  }, 1000);\r\n}\r\nonMounted(() => {\r\n  count()\r\n})\r\n\r\nwatch(() => props.reset, count)\r\n\r\ndefineExpose({\r\n  count\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <div class=\"w-full overflow-y-auto\">\r\n    <OtpInput :length=\"6\" v-model=\"form.code\" :has-error=\"hasOtpError\" class=\"mt-[70px] mb-[30px]\" />\r\n    <OtpResendButton ref=\"otpContainer\" :reset=\"resetOtp\" @resend=\"resendOtp\"/>\r\n    <MainActionButton class=\"mt-[24px]\" @click=\"checkOtpCode\">\r\n      <div class=\"text-white text-center text-[20px] leading-[30px]\">تایید</div>\r\n    </MainActionButton>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\r\nimport MainActionButton from \"~/components/button/form/MainActionButton.vue\";\r\nimport {useDrawerStore} from \"~/store/Drawer\";\r\nimport OtpInput from \"~/components/input/OtpInput.vue\";\r\nimport OtpResendButton from \"~/components/otp-drawer/OtpResendButton.vue\";\r\n\r\nconst emits = defineEmits(['changeEmail', 'resend', 'validate'])\r\nconst store = useDrawerStore()\r\n\r\nconst form = ref<IVerifyRegisterForm>({\r\n  email: '',\r\n  code: '',\r\n})\r\n\r\nconst resetOtp = ref<Boolean>(false)\r\nconst hasOtpError = ref<Boolean>(false)\r\n\r\nconst checkOtpCode = () => {\r\n  if (!form.value.code) {\r\n    //TODO: Alert\r\n    return\r\n  }\r\n  emits('validate', form.value.code)\r\n}\r\n\r\nconst resendOtp = () => {\r\n  emits('resend')\r\n  resetOtp.value = !resetOtp.value\r\n  form.value.code = ''\r\n}\r\n\r\nwatch(() => form.value.code, () => hasOtpError.value = false)\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAkCM,UAAA,WAAW,IAAc,CAAA,CAAE;AAEjC,UAAM,YAAY;;;;;;;;;;;;;;;;;;;;ACnClB,MAAM,gBAAgB;AACf,MAAM,cAAwD,MAAM;AAOzE,UAAQ,MAAM,aAAa;AAC7B;;;;;;;;;;;;;;;;ACIA,UAAM,QAAQ;AAWR,UAAA,OAAO,IAAY,MAAM,MAAM;AAC/B,UAAA,aAAa,IAAa,KAAK;AACrC,eAAW,QAAQ;AAMnB,UAAM,QAAQ,MAAM;AAClB,iBAAW,QAAQ;AACC,kBAQb;AAAA,IAAA;AAMH,UAAA,MAAM,MAAM,OAAO,KAAK;AAEjB,aAAA;AAAA,MACX;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;ACpCD,UAAM,QAAQ;AACA,mBAAe;AAE7B,UAAM,OAAO,IAAyB;AAAA,MACpC,OAAO;AAAA,MACP,MAAM;AAAA,IAAA,CACP;AAEK,UAAA,WAAW,IAAa,KAAK;AAC7B,UAAA,cAAc,IAAa,KAAK;AAEtC,UAAM,eAAe,MAAM;AACrB,UAAA,CAAC,KAAK,MAAM,MAAM;AAEpB;AAAA,MACF;AACM,YAAA,YAAY,KAAK,MAAM,IAAI;AAAA,IAAA;AAGnC,UAAM,YAAY,MAAM;AACtB,YAAM,QAAQ;AACL,eAAA,QAAQ,CAAC,SAAS;AAC3B,WAAK,MAAM,OAAO;AAAA,IAAA;AAGpB,UAAM,MAAM,KAAK,MAAM,MAAM,MAAM,YAAY,QAAQ,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[1]}